#!/bin/bash

if [ -f $HOME/.dmenurc ]; then
  . $HOME/.dmenurc
else
  DMENU='rofi -dmenu -p Bookmark -i'
fi

BMS=`php /usr/local/bin/parseBookmarks.php`

while read -r line; do
    BMSN="$BMSN"$'\n'`echo $line | awk 'BEGIN { FS = ";s;" } { print $1 }'`
done <<< "$BMS"
GS=`echo "$BMSN" | $DMENU $*`

echo "Input: $GS"

if [ -z "$GS" ]; then
    echo "Okay byebye"
    exit
fi

RES=`echo "$BMS" | grep -i "$GS"`

URL=`echo $RES | awk 'BEGIN { FS = ";s;" } { print $2 }'`
echo "Launching $URL"
xdg-open "$URL"
